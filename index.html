<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>5-Day Hybrid Gym Plan ‚Äî Pocket Coach</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<style>
  :root{
    --bg:#fbfcfe;
    --card:#ffffff;
    --muted:#6b7280;
    --accent:#1167b1;
    --accent-2:#0ea5a0;
    --accent-3:#f59e0b;
    --success:#059669;
    --danger:#ef4444;
    --glass: rgba(255,255,255,0.7);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    --radius:12px;
    --pad:14px;
  }
  html,body{height:100%;background:linear-gradient(180deg,#f6fbff, #fbfcfe);margin:0;color:#0f172a;}
  .app{
    max-width:980px;margin:12px auto;padding:12px;
  }
  header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:14px}
  h1{font-size:20px;margin:0;color:var(--accent)}
  p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}
  .goals{
    background:var(--card);border-radius:var(--radius);padding:12px;box-shadow:0 6px 18px rgba(15,23,42,0.06);
    display:flex;flex-wrap:wrap;gap:8px;align-items:center;
  }
  .goal-btn{
    padding:8px 10px;border-radius:10px;border:1px solid #e6eef9;background:transparent;color:var(--muted);
    font-size:13px;display:inline-flex;gap:8px;align-items:center;cursor:pointer;
    transition:all .15s;
  }
  .goal-btn.active{background:linear-gradient(90deg,var(--accent)10%, #2b8bdc);color:white;border-color:transparent;box-shadow:0 6px 18px rgba(17,103,177,0.12)}
  .controls{display:flex;gap:8px;align-items:center}
  button.icon{
    border:0;background:var(--card);padding:8px;border-radius:10px;box-shadow:0 6px 18px rgba(15,23,42,0.04);cursor:pointer
  }
  main{margin-top:12px;display:grid;grid-template-columns:1fr;gap:12px}
  .day{
    background:var(--card);border-radius:14px;padding:12px;box-shadow:0 10px 30px rgba(10,20,40,0.04);
    overflow:hidden;
  }
  .day-header{display:flex;align-items:center;justify-content:space-between;gap:10px;cursor:pointer}
  .day-title{display:flex;gap:12px;align-items:center}
  .day-title h2{margin:0;font-size:16px}
  .badges{display:flex;gap:8px;align-items:center}
  .badge{font-size:12px;padding:6px 8px;border-radius:999px;background:#eef6ff;color:var(--accent);border:1px solid rgba(17,103,177,0.07)}
  .badge.push{background:#fff7ed;color:var(--accent-3);border-color:rgba(245,158,11,0.06)}
  .badge.pull{background:#f0fdf4;color:var(--success);color:#115e44;border-color:rgba(5,150,105,0.06)}
  .badge.core{background:#f0f9ff;color:var(--accent-2);border-color:rgba(14,165,160,0.06)}
  .exercise-list{margin-top:10px;display:grid;gap:8px}
  .ex{
    display:flex;gap:10px;padding:10px;border-radius:12px;align-items:flex-start;background:linear-gradient(180deg, rgba(250,252,255,1), var(--glass));
    border:1px solid rgba(10,20,40,0.03)
  }
  .ex .left{width:34px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:6px}
  .ex strong{display:block;font-size:14px}
  .ex small{color:var(--muted);display:block;margin-top:4px;font-size:12px}
  .ex .meta{margin-left:auto;text-align:right;font-size:13px;color:var(--muted)}
  .tag{display:inline-block;padding:4px 8px;border-radius:8px;font-size:11px;margin-right:6px;background:rgba(15,23,42,0.04)}
  .notes{margin-top:6px;color:var(--muted);font-size:12px}
  .finisher{margin-top:8px;padding:10px;border-radius:10px;background:linear-gradient(90deg,#fff,#fbfbff);border:1px dashed rgba(15,23,42,0.04)}
  input[type="checkbox"]{width:20px;height:20px}
  .small{font-size:12px;color:var(--muted)}
  footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}
  .controls .btn{padding:8px 12px;border-radius:10px;border:0;background:var(--accent);color:white;font-size:14px;cursor:pointer}
  .muted{color:var(--muted)}
  /* mobile touches */
  button, .goal-btn{touch-action:manipulation}
  /* collapsed content */
  .content{max-height:0;overflow:hidden;transition:max-height .28s ease}
  .content.open{max-height:1000px;padding-top:12px}
  .check-row{display:flex;gap:6px;align-items:center}
  @media (min-width:720px){
    main{grid-template-columns:1fr}
  }
  /* print */
  @media print{
    body{background:white}
    .controls, header, footer{display:none}
    .day{page-break-inside:avoid;box-shadow:none;border:1px solid #ddd}
  }

  /* ====== Variant (alternatives) UI ====== */
  .variant-btn{
    display:inline-flex;align-items:center;justify-content:center;margin-left:6px;
    border:1px solid #e6eef9;background:#fff;border-radius:6px;padding:0 6px;height:20px;cursor:pointer;
    font-size:12px;line-height:1;vertical-align:middle;box-shadow:0 3px 10px rgba(15,23,42,0.04);
  }
  .variant-menu{
    position:absolute;z-index:60;background:var(--card);border:1px solid rgba(15,23,42,0.08);border-radius:10px;padding:8px;
    box-shadow:0 20px 40px rgba(15,23,42,0.15);display:none;min-width:220px;max-width:280px
  }
  .variant-menu.open{display:block}
  .variant-menu h4{margin:4px 6px 8px;font-size:12px;color:var(--muted)}
  .variant-opt{
    display:flex;align-items:flex-start;gap:8px;width:100%;border:0;background:transparent;padding:8px;border-radius:8px;cursor:pointer;text-align:left
  }
  .variant-opt:hover{background:rgba(15,23,42,0.04)}
  .variant-opt .title{font-size:13px}
  .variant-opt .sets{font-size:11px;padding:2px 6px;border-radius:999px;background:rgba(15,23,42,0.06)}
  .variant-opt small{color:var(--muted);display:block;margin-top:2px}
  .variant-opt .cat{margin-left:auto;font-size:11px;color:var(--muted)}

  /* ---- Rest Timer UI ---- */
  .timer-btn, .preset-btn{
    border:1px solid #e6eef9;background:#fff;border-radius:8px;padding:4px 6px;font-size:11px;cursor:pointer;
    box-shadow:0 3px 10px rgba(15,23,42,0.04);
  }
  .timer-btn{display:inline-flex;align-items:center;gap:4px}
  .timer-btn:active{transform:scale(.98)}
  .preset-btn{font-size:10px;opacity:.8}
  .rt-menu{
    position:absolute;z-index:55;background:var(--card);border:1px solid rgba(15,23,42,0.08);border-radius:10px;padding:6px;
    box-shadow:0 20px 40px rgba(15,23,42,0.15);display:none;min-width:160px
  }
  .rt-menu.open{display:block}
  .rt-menu h4{margin:4px 6px 6px;font-size:12px;color:var(--muted)}
  .rt-row{display:flex;flex-wrap:wrap;gap:6px}
  .rt-chip{
    border:1px solid #e6eef9;background:#fff;border-radius:999px;padding:6px 10px;font-size:12px;cursor:pointer
  }
  .rt-chip.active{background:#eef6ff;color:var(--accent);border-color:rgba(17,103,177,0.18)}
  /* Stacked running timers (bottom center) */
  .running-timers{
    position:fixed;left:50%;transform:translateX(-50%);bottom:18px;display:flex;flex-direction:column;gap:8px;z-index:9999
  }
  .timer-pill{
    display:flex;align-items:center;gap:8px;background:var(--card);border:1px solid rgba(15,23,42,0.08);
    border-radius:999px;padding:8px 12px;box-shadow:0 10px 30px rgba(0,0,0,.15);font-size:13px
  }
  .timer-pill .name{max-width:44vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
  .timer-pill .time{font-variant-numeric:tabular-nums;color:var(--muted)}
  .timer-pill button{border:0;background:transparent;color:var(--danger);font-size:16px;line-height:1;cursor:pointer}
</style>
</head>
<body>
<div class="app" role="application" aria-label="Gym pocket coach">
  <header>
    <div>
      <h1>5-Day Hybrid Plan ‚Ä¢ Pocket Coach</h1>
      <p class="lead">Balanced strength, shaping, core & conditioning ‚Äî phone-friendly and offline.</p>
    </div>
    <div class="controls">
      <button class="icon" id="expandAll" title="Expand all" aria-label="Expand all">‚ñ∏‚ñ∏</button>
      <button class="icon" id="collapseAll" title="Collapse all" aria-label="Collapse all">‚ñæ‚ñæ</button>
      <button class="icon" id="clearChecks" title="Clear today's checks" aria-label="Clear checks">‚ü≥</button>
    </div>
  </header>

  <section class="goals" aria-label="Goals selection">
    <div style="min-width:72px"><strong class="small">Goals</strong></div>
    <button class="goal-btn" data-goal="strength">üèãÔ∏è Build Strength</button>
    <button class="goal-btn" data-goal="hypertrophy">üí™ Muscle/Shape</button>
    <button class="goal-btn" data-goal="definition">üî• Fat Loss / Tone</button>
    <button class="goal-btn" data-goal="core">ü¶¥ Core & Posture</button>
    <button class="goal-btn" data-goal="hybrid">‚ö° Hybrid (Cardio + Strength)</button>
    <div style="margin-left:auto;font-size:12px;color:var(--muted)">Saved locally ‚Ä¢ Tap to toggle</div>
  </section>

  <main>
    <!-- Day 1 -->
    <article class="day" id="day-1">
      <div class="day-header" data-day="1" tabindex="0">
        <div class="day-title">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" style="flex:0 0 40px">
            <rect x="2" y="2" width="20" height="20" rx="6" fill="#eef9ff"></rect>
            <path d="M7 13h10M7 9h6" stroke="#1167b1" stroke-width="1.6" stroke-linecap="round"/>
          </svg>
          <div>
            <h2>Day 1 ‚Äî Upper (Strength + Size)</h2>
            <div class="small muted">Push & Pull balanced ‚Ä¢ emphasis on chest, back, shoulders</div>
          </div>
        </div>
        <div class="badges">
          <span class="badge push">Push</span>
          <span class="badge pull">Pull</span>
          <span class="badge core">Core</span>
        </div>
      </div>

      <section class="content" aria-hidden="true">
        <div class="exercise-list">
          <div class="ex" data-ex="Barbell Bench Press">
            <div class="left">
              <input type="checkbox" data-key="d1-bench">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Barbell Bench Press <span class="tag">4√ó6</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Mid chest (pectoralis major), front delts, triceps ‚Ä¢ Push compound for pressing strength & size.</small>
              <div class="notes small">Tip: tuck elbows ~45¬∞, drive feet, press in an arc. Controlled descent, explosive up.</div>
            </div>
            <div class="meta">Push</div>
          </div>

          <div class="ex" data-ex="Pull-Ups">
            <div class="left">
              <input type="checkbox" data-key="d1-pullups">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Pull-Ups / Lat Pulldown <span class="tag">4√ó6‚Äì8</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Lats (width), biceps, rear delts ‚Ä¢ Vertical pulling motion for back width.</small>
              <div class="notes small">Tip: full range of motion, chest to bar. Use assistance if needed; add weight when strong.</div>
            </div>
            <div class="meta">Pull</div>
          </div>

          <div class="ex" data-ex="Overhead Press">
            <div class="left">
              <input type="checkbox" data-key="d1-ohp">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Overhead Press (Barbell/Dumbbell) <span class="tag">3√ó8</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Shoulders (front + side delts), triceps ‚Ä¢ Standing press builds upper-body pressing power and core stability.</small>
              <div class="notes small">Tip: braced core, slightly overhead bar path, avoid excessive lumbar arch.</div>
            </div>
            <div class="meta">Push</div>
          </div>

          <div class="ex" data-ex="Barbell Row">
            <div class="left">
              <input type="checkbox" data-key="d1-row">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Barbell Row <span class="tag">3√ó8‚Äì10</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Back thickness (lats, rhomboids, traps), rear delts, biceps ‚Ä¢ Horizontal pull to balance pressing.</small>
              <div class="notes small">Tip: chest up, hips back; pull bar to low chest. Use strict form to protect lower back.</div>
            </div>
            <div class="meta">Pull</div>
          </div>

          <div class="ex" data-ex="Lateral Raises">
            <div class="left">
              <input type="checkbox" data-key="d1-latraise">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Dumbbell Lateral Raises <span class="tag">2√ó12‚Äì15</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Side delts ‚Ä¢ Isolation for shoulder cap and width.</small>
              <div class="notes small">Tip: light weight, lead with elbow, small range for side delt focus.</div>
            </div>
            <div class="meta">Accessory</div>
          </div>
        </div>

        <div class="finisher small">
          Optional Finisher ‚Ä¢ 10 min: Bike or Rower intervals (30s hard / 60s easy) ‚Äî cardio + metabolic conditioning.
        </div>
      </section>
    </article>

    <!-- Day 2 -->
    <article class="day" id="day-2">
      <div class="day-header" data-day="2" tabindex="0">
        <div class="day-title">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
            <rect x="2" y="2" width="20" height="20" rx="6" fill="#f3fffb"></rect>
            <path d="M7 8v8M12 6v12M17 10v4" stroke="#059669" stroke-width="1.6" stroke-linecap="round"/>
          </svg>
          <div>
            <h2>Day 2 ‚Äî Lower (Strength + Core)</h2>
            <div class="small muted">Quads, glutes, hamstrings ‚Ä¢ posture and core emphasis</div>
          </div>
        </div>
        <div class="badges">
          <span class="badge push">Legs</span>
          <span class="badge core">Core</span>
        </div>
      </div>

      <section class="content" aria-hidden="true">
        <div class="exercise-list">
          <div class="ex">
            <div class="left">
              <input type="checkbox" data-key="d2-squat">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Back Squat <span class="tag">4√ó6</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Quads, glutes, core ‚Ä¢ Foundation for lower-body strength.</small>
              <div class="notes small">Tip: neutral spine, knees tracking toes. Depth as mobility allows. Drive through heels.</div>
            </div>
            <div class="meta">Legs</div>
          </div>

          <div class="ex">
            <div class="left">
              <input type="checkbox" data-key="d2-rdl">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Romanian Deadlift <span class="tag">3√ó8</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Hamstrings, glutes, lower back (erector spinae) ‚Ä¢ Posterior chain strength.</small>
              <div class="notes small">Tip: hinge at hips, slight knee bend, keep bar close to legs.</div>
            </div>
            <div class="meta">Pull</div>
          </div>

          <div class="ex">
            <div class="left">
              <input type="checkbox" data-key="d2-lunge">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Walking Lunges <span class="tag">2√ó12/leg</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Quads, glutes, single-leg stability.</small>
              <div class="notes small">Tip: long stride for glute focus; short stride for quad focus.</div>
            </div>
            <div class="meta">Legs</div>
          </div>

          <div class="ex">
            <div class="left">
              <input type="checkbox" data-key="d2-hangleg">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Hanging Leg Raises <span class="tag">3√ó12‚Äì15</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Lower abs, hip flexors ‚Ä¢ Great for core and midsection definition.</small>
              <div class="notes small">Tip: control the descent; tuck knees first if straight legs too hard.</div>
            </div>
            <div class="meta">Core</div>
          </div>

          <div class="ex">
            <div class="left">
              <input type="checkbox" data-key="d2-sideplank">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Side Plank <span class="tag">3√ó30‚Äì45s/side</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Obliques, transverse abdominis ‚Ä¢ Anti-rotation & posture support.</small>
              <div class="notes small">Tip: hips high, ribs tucked. Great for desk posture and oblique development.</div>
            </div>
            <div class="meta">Core</div>
          </div>
        </div>
      </section>
    </article>

    <!-- Day 3 -->
    <article class="day" id="day-3">
      <div class="day-header" data-day="3" tabindex="0">
        <div class="day-title">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
            <rect x="2" y="2" width="20" height="20" rx="6" fill="#fff7ed"></rect>
            <path d="M8 15h8M8 11h8M8 7h8" stroke="#f59e0b" stroke-width="1.6" stroke-linecap="round"/>
          </svg>
          <div>
            <h2>Day 3 ‚Äî Hybrid Conditioning (Push + Pull + Cardio)</h2>
            <div class="small muted">Mix of strength & cardio ‚Ä¢ whole-body conditioning</div>
          </div>
        </div>
        <div class="badges">
          <span class="badge push">Hybrid</span>
          <span class="badge core">Conditioning</span>
        </div>
      </div>

      <section class="content" aria-hidden="true">
        <div class="exercise-list">
          <div class="ex">
            <div class="left">
              <input type="checkbox" data-key="d3-incline">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Incline Dumbbell Press <span class="tag">3√ó8‚Äì10</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Upper chest, front delts ‚Ä¢ Great for chest shaping and upper pec development.</small>
            </div>
            <div class="meta">Push</div>
          </div>

          <div class="ex">
            <div class="left">
              <input type="checkbox" data-key="d3-row">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Seated Cable Row <span class="tag">3√ó10</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Mid back, rear delts, biceps ‚Ä¢ Controlled horizontal pulling.</small>
            </div>
            <div class="meta">Pull</div>
          </div>

          <div class="ex">
            <div class="left">
              <input type="checkbox" data-key="d3-swing">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div>
              <strong>Kettlebell Swings <span class="tag">3√ó15</span></strong>
              <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
              <small>Targets: Glutes, hamstrings, lower back ‚Ä¢ Explosive hip hinge for power + conditioning.</small>
            </div>
            <div class="meta">Power</div>
          </div>
        </div>

        <div class="finisher">
          <strong class="small">Circuit Finisher ‚Ä¢ 3‚Äì4 rounds</strong>
          <div class="small muted">250m Row ‚Üí 15 Push-ups ‚Üí 15 Goblet Squats ‚Üí 60s rest</div>
        </div>
      </section>
    </article>

    <!-- Day 4 -->
    <article class="day" id="day-4">
      <div class="day-header" data-day="4" tabindex="0">
        <div class="day-title">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
            <rect x="2" y="2" width="20" height="20" rx="6" fill="#fff3f3"></rect>
            <path d="M9 12h6M9 8h6M9 16h6" stroke="#ef4444" stroke-width="1.6" stroke-linecap="round"/>
          </svg>
          <div>
            <h2>Day 4 ‚Äî Upper (Definition & Accessories)</h2>
            <div class="small muted">Accessory emphasis: shape, rear delts, traps, arms</div>
          </div>
        </div>
        <div class="badges">
          <span class="badge push">Push</span>
          <span class="badge pull">Pull</span>
        </div>
      </div>

      <section class="content" aria-hidden="true">
        <div class="exercise-list">
          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d4-incline">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Incline Bench Press <span class="tag">3√ó8</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Upper chest ‚Ä¢ Focused shaping.</small></div><div class="meta">Push</div></div>

          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d4-pull">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Pull-ups / Lat Pulldown <span class="tag">3√ó8‚Äì10</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Width & lats, great for balanced back development.</small></div><div class="meta">Pull</div></div>

          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d4-ohplight">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Overhead Press (lighter) <span class="tag">3√ó10</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Shoulders & triceps ‚Ä¢ Higher rep variation to add shape.</small></div><div class="meta">Push</div></div>

          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d4-facepull">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Face Pulls <span class="tag">3√ó12‚Äì15</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Rear delts, rotator cuff, traps ‚Ä¢ Key for posture and rounded shoulder look.</small></div><div class="meta">Pull</div></div>

          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d4-biceps">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Biceps Curls <span class="tag">2√ó12</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Biceps ‚Ä¢ Definition and arm shaping.</small></div><div class="meta">Accessory</div></div>

          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d4-triceps">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Triceps Rope Pushdowns <span class="tag">2√ó12</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Triceps ‚Ä¢ Helps pressing performance and arm definition.</small></div><div class="meta">Accessory</div></div>
        </div>
      </section>
    </article>

    <!-- Day 5 -->
    <article class="day" id="day-5">
      <div class="day-header" data-day="5" tabindex="0">
        <div class="day-title">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
            <rect x="2" y="2" width="20" height="20" rx="6" fill="#fffaf0"></rect>
            <path d="M8 12h8M8 8h8" stroke="#f59e0b" stroke-width="1.6" stroke-linecap="round"/>
          </svg>
          <div>
            <h2>Day 5 ‚Äî Lower + Core (Glutes, Hams, Stability)</h2>
            <div class="small muted">Lower-body shaping + core finisher</div>
          </div>
        </div>
        <div class="badges">
          <span class="badge push">Legs</span>
          <span class="badge core">Core</span>
        </div>
      </div>

      <section class="content" aria-hidden="true">
        <div class="exercise-list">
          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d5-front">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Front Squat / Goblet Squat <span class="tag">3√ó8‚Äì10</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Quads, core ‚Ä¢ Front-loading increases core demand & leg shape.</small></div><div class="meta">Legs</div></div>

          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d5-hip">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Barbell Hip Thrust <span class="tag">3√ó8‚Äì10</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Glutes ‚Ä¢ Primary shaping movement for posterior chain.</small></div><div class="meta">Legs</div></div>

          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d5-legcurl">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Leg Curl <span class="tag">3√ó10‚Äì12</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Hamstrings ‚Ä¢ Isolation to balance quad work.</small></div><div class="meta">Pull</div></div>

          <div class="ex"><div class="left">
              <input type="checkbox" data-key="d5-bulg">
              <button class="timer-btn" data-timer role="button" aria-label="Start rest timer">‚è±</button>
              <button class="preset-btn" data-preset role="button" aria-label="Timer preset">‚ãØ</button>
            </div>
            <div><strong>Bulgarian Split Squat <span class="tag">2√ó12/leg</span></strong>
            <button class="variant-btn" aria-label="Choose alternative">‚ñº</button>
            <small>Targets: Quads, glutes, single-leg stability.</small></div><div class="meta">Legs</div></div>
        </div>

        <div class="finisher">
          <strong class="small">Core Finisher (2‚Äì3 rounds)</strong>
          <div class="small muted">Plank 45s ‚Üí Russian Twists 20 (weighted) ‚Üí Back Extensions 12</div>
        </div>
      </section>
    </article>
  </main>

  <footer>
    Tip: Add to Home Screen (Safari) for a quick gym app. Your progress & goals are stored locally on this device.
  </footer>
</div>

<!-- Stacked running timers -->
<div class="running-timers" aria-live="polite" aria-atomic="true"></div>

<script>
  // --- Simple app JS: collapsibles, localStorage for goals + exercise checks ---
  (function(){
    const days = document.querySelectorAll('.day');
    const expandAll = document.getElementById('expandAll');
    const collapseAll = document.getElementById('collapseAll');
    const clearChecks = document.getElementById('clearChecks');
    const goalBtns = document.querySelectorAll('.goal-btn');

    // Helpers
    const ls = window.localStorage || {};
    const getLS = (k, def) => { try { const v = ls.getItem(k); return v ? JSON.parse(v) : def; } catch(e){return def;} };
    const setLS = (k,v) => { try { ls.setItem(k, JSON.stringify(v)); } catch(e){} };

    // Load saved expanded state? by default collapsed.
    const savedExpanded = getLS('pocket:expanded', {});
    // Initialize collapsibles
    days.forEach(day => {
      const header = day.querySelector('.day-header');
      const content = day.querySelector('.content');
      const dayId = day.id;
      if(savedExpanded[dayId]) content.classList.add('open'), content.setAttribute('aria-hidden','false');
      header.addEventListener('click', ()=> toggle(dayId, content));
      header.addEventListener('keydown', (e) => { if(e.key==='Enter' || e.key===' ') { e.preventDefault(); toggle(dayId, content);} });
    });
    function toggle(dayId, content){
      const open = content.classList.toggle('open');
      content.setAttribute('aria-hidden', String(!open));
      savedExpanded[dayId] = open;
      setLS('pocket:expanded', savedExpanded);
    }
    expandAll.addEventListener('click', ()=> {
      document.querySelectorAll('.content').forEach(c=>{ c.classList.add('open'); c.setAttribute('aria-hidden','false');});
      setLS('pocket:expanded', Object.fromEntries(Array.from(document.querySelectorAll('.day')).map(d=>[d.id,true])));
    });
    collapseAll.addEventListener('click', ()=> {
      document.querySelectorAll('.content').forEach(c=>{ c.classList.remove('open'); c.setAttribute('aria-hidden','true');});
      setLS('pocket:expanded', {});
    });

    // Goals: load and toggle
    const savedGoals = getLS('pocket:goals', {});
    goalBtns.forEach(btn=>{
      const key = btn.dataset.goal;
      if(savedGoals[key]) btn.classList.add('active');
      btn.addEventListener('click', ()=>{
        const on = btn.classList.toggle('active');
        savedGoals[key] = on;
        setLS('pocket:goals', savedGoals);
        flashToast(on ? `Goal saved: ${key}` : `Goal removed: ${key}`);
      });
    });

    // Exercise checks persistence
    const savedChecks = getLS('pocket:checks', {});
    document.querySelectorAll('input[type="checkbox"][data-key]').forEach(cb => {
      const k = cb.dataset.key;
      cb.checked = !!savedChecks[k];
      cb.addEventListener('change', ()=>{
        savedChecks[cb.dataset.key] = cb.checked;
        setLS('pocket:checks', savedChecks);
      });
    });
    clearChecks.addEventListener('click', ()=>{
      if(!confirm('Clear all saved checks for this device?')) return;
      document.querySelectorAll('input[type="checkbox"][data-key]').forEach(cb=>{cb.checked=false;});
      setLS('pocket:checks', {});
    });

    // small toast feedback
    function flashToast(msg='Saved'){
      const t = document.createElement('div');
      t.textContent = msg;
      Object.assign(t.style,{position:'fixed',left:'50%',transform:'translateX(-50%)',bottom:'28px',padding:'10px 14px',background:'rgba(15,23,42,0.9)',color:'#fff',borderRadius:'10px',zIndex:9999,fontSize:'13px',transition:'opacity .25s'});
      document.body.appendChild(t);
      setTimeout(()=> t.style.opacity='0',1200);
      setTimeout(()=> t.remove(),1700);
    }

    // Accessibility: keyboard support for headers
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        document.querySelectorAll('.content.open').forEach(c=>{ c.classList.remove('open'); c.setAttribute('aria-hidden','true'); });
        setLS('pocket:expanded', {});
      }
    });

    // ====== EXERCISE ALTERNATIVES (VARIANTS) ======
    const variantKey = 'pocket:variant';
    const savedVariant = getLS(variantKey, {}); // { [exerciseKey]: variantId }

    // Catalog of alternatives per exercise slot
    // Each option: {id, title, sets, category, blurb}
    const VARIANTS = {
      // Day 1
      'd1-bench': [
        {id:'barbell-bench', title:'Barbell Bench Press', sets:'4√ó6', category:'Push', blurb:'Mid chest, front delts, triceps ‚Ä¢ Pressing strength & size.'},
        {id:'db-bench', title:'Dumbbell Bench Press', sets:'4√ó8', category:'Push', blurb:'Greater ROM & shoulder freedom; balanced strength.'},
        {id:'machine-chest-press', title:'Machine Chest Press', sets:'4√ó8', category:'Push', blurb:'Stable path for safe effort; easy drop sets.'},
        {id:'push-ups', title:'Push-Ups (Weighted/Assisted)', sets:'4√óAMRAP', category:'Push', blurb:'Bodyweight push; scalable with plates/bands.'}
      ],
      'd1-pullups': [
        {id:'pull-ups', title:'Pull-Ups', sets:'4√ó6‚Äì8', category:'Pull', blurb:'Lats/biceps; full ROM, chest to bar.'},
        {id:'lat-pulldown', title:'Lat Pulldown', sets:'4√ó8‚Äì10', category:'Pull', blurb:'Controlled vertical pull; adjustable load.'},
        {id:'assisted-pullup', title:'Assisted Pull-Up Machine', sets:'4√ó8‚Äì10', category:'Pull', blurb:'Same pattern with consistent support.'},
        {id:'inverted-row', title:'Inverted Row (Smith/TRX)', sets:'4√ó8‚Äì12', category:'Pull', blurb:'Bodyweight horizontal pull; torso rigid.'}
      ],
      'd1-ohp': [
        {id:'barbell-ohp', title:'Barbell Overhead Press', sets:'3√ó8', category:'Push', blurb:'Shoulders/triceps; standing bracing.'},
        {id:'db-shoulder-press', title:'Dumbbell Shoulder Press (Seated)', sets:'3√ó8‚Äì10', category:'Push', blurb:'Shoulder-friendly path; reduce low-back load.'},
        {id:'machine-shoulder-press', title:'Machine Shoulder Press', sets:'3√ó10', category:'Push', blurb:'Stable & higher reps for shape.'}
      ],
      'd1-row': [
        {id:'barbell-row', title:'Barbell Row', sets:'3√ó8‚Äì10', category:'Pull', blurb:'Back thickness; strict torso angle.'},
        {id:'seated-cable-row', title:'Seated Cable Row', sets:'3√ó10', category:'Pull', blurb:'Controlled horizontal pull.'},
        {id:'cs-machine-row', title:'Chest-Supported Row (Machine)', sets:'3√ó10', category:'Pull', blurb:'Takes low-back out; focus on squeeze.'},
        {id:'db-row', title:'1-Arm Dumbbell Row (Bench)', sets:'3√ó10/side', category:'Pull', blurb:'Unilateral; lat focus, core anti-rotation.'}
      ],
      'd1-latraise': [
        {id:'db-lateral-raise', title:'Dumbbell Lateral Raises', sets:'2√ó12‚Äì15', category:'Accessory', blurb:'Side delts; light & strict range.'},
        {id:'cable-lateral-raise', title:'Cable Lateral Raise', sets:'2√ó12‚Äì15', category:'Accessory', blurb:'Constant tension; single-arm or dual.'},
        {id:'machine-lateral-raise', title:'Machine Lateral Raise', sets:'2√ó12‚Äì15', category:'Accessory', blurb:'Guided path; easy to control tempo.'}
      ],
      // Day 2
      'd2-squat': [
        {id:'back-squat', title:'Back Squat', sets:'4√ó6', category:'Legs', blurb:'Quads/glutes/core ‚Ä¢ foundation lift.'},
        {id:'hack-squat', title:'Hack Squat (Machine)', sets:'4√ó8', category:'Legs', blurb:'Quad focus; back supported.'},
        {id:'leg-press', title:'Leg Press', sets:'4√ó10', category:'Legs', blurb:'Stable; drive evenly through feet.'},
        {id:'smith-squat', title:'Smith Machine Squat', sets:'4√ó8‚Äì10', category:'Legs', blurb:'Consistent path; stance to bias quads/glutes.'}
      ],
      'd2-rdl': [
        {id:'barbell-rdl', title:'Romanian Deadlift', sets:'3√ó8', category:'Pull', blurb:'Hinge; hamstrings/glutes; bar close.'},
        {id:'db-rdl', title:'Dumbbell RDL', sets:'3√ó10', category:'Pull', blurb:'Shoulder-friendly; same hinge pattern.'},
        {id:'smith-rdl', title:'Smith Machine RDL', sets:'3√ó8‚Äì10', category:'Pull', blurb:'Stable path; focus on stretch.'}
      ],
      'd2-lunge': [
        {id:'walking-lunge', title:'Walking Lunges', sets:'2√ó12/leg', category:'Legs', blurb:'Stride length sets quad vs glute bias.'},
        {id:'bulgarian', title:'Bulgarian Split Squat', sets:'2√ó10/leg', category:'Legs', blurb:'Unilateral; big quad/glute stimulus.'},
        {id:'reverse-lunge', title:'Reverse Lunges', sets:'2√ó12/leg', category:'Legs', blurb:'Knee-friendly; controlled steps back.'}
      ],
      'd2-hangleg': [
        {id:'hanging-leg-raise', title:'Hanging Leg Raises', sets:'3√ó12‚Äì15', category:'Core', blurb:'Lower abs; control descent.'},
        {id:'captains-chair', title:'Captain‚Äôs Chair Knee Raise', sets:'3√ó12‚Äì15', category:'Core', blurb:'Support for strict reps.'},
        {id:'lying-leg-raise', title:'Lying Leg Raise', sets:'3√ó15', category:'Core', blurb:'Posterior pelvic tilt; no sway.'}
      ],
      'd2-sideplank': [
        {id:'side-plank', title:'Side Plank', sets:'3√ó30‚Äì45s/side', category:'Core', blurb:'Obliques & posture.'},
        {id:'copenhagen-plank', title:'Copenhagen Side Plank (light)', sets:'3√ó20‚Äì30s/side', category:'Core', blurb:'Adductors + obliques; knee-supported.'},
        {id:'pallof-press', title:'Cable Pallof Press', sets:'3√ó10/side', category:'Core', blurb:'Anti-rotation; ribs down.'}
      ],
      // Day 3
      'd3-incline': [
        {id:'incline-db', title:'Incline Dumbbell Press', sets:'3√ó8‚Äì10', category:'Push', blurb:'Upper chest; shoulder-friendly.'},
        {id:'incline-barbell', title:'Incline Barbell Press', sets:'3√ó6‚Äì8', category:'Push', blurb:'Heavier loading; controlled descent.'},
        {id:'incline-machine', title:'Incline Chest Press (Machine)', sets:'3√ó10', category:'Push', blurb:'Stable & focused on pecs.'}
      ],
      'd3-row': [
        {id:'seated-cable-row', title:'Seated Cable Row', sets:'3√ó10', category:'Pull', blurb:'Controlled horizontal pull.'},
        {id:'cs-machine-row', title:'Chest-Supported Row (Machine)', sets:'3√ó10', category:'Pull', blurb:'Low-back friendly; squeeze.'},
        {id:'db-row', title:'1-Arm Dumbbell Row', sets:'3√ó10/side', category:'Pull', blurb:'Unilateral lat focus.'}
      ],
      'd3-swing': [
        {id:'kb-swing', title:'Kettlebell Swings', sets:'3√ó15', category:'Power', blurb:'Explosive hinge; snap hips.'},
        {id:'db-swing', title:'Dumbbell Swings', sets:'3√ó15', category:'Power', blurb:'KB alternative; same pattern.'},
        {id:'cable-pullthrough', title:'Cable Pull-Through', sets:'3√ó12‚Äì15', category:'Power', blurb:'Posterior chain; hinge pattern.'}
      ],
      // Day 4
      'd4-incline': [
        {id:'incline-barbell', title:'Incline Bench Press', sets:'3√ó8', category:'Push', blurb:'Upper chest focus.'},
        {id:'incline-db', title:'Incline Dumbbell Press', sets:'3√ó10', category:'Push', blurb:'ROM & joint friendly.'},
        {id:'incline-machine', title:'Incline Chest Press (Machine)', sets:'3√ó10', category:'Push', blurb:'Constant tension.'}
      ],
      'd4-pull': [
        {id:'pull-ups', title:'Pull-Ups / Chin-Ups', sets:'3√ó8‚Äì10', category:'Pull', blurb:'Lats/biceps; full ROM.'},
        {id:'lat-pulldown', title:'Lat Pulldown', sets:'3√ó10', category:'Pull', blurb:'Vertical pull; adjustable load.'},
        {id:'assisted-pullup', title:'Assisted Pull-Up Machine', sets:'3√ó10', category:'Pull', blurb:'Same pattern with support.'}
      ],
      'd4-ohplight': [
        {id:'seated-db-press', title:'Overhead Press (lighter)', sets:'3√ó10', category:'Push', blurb:'Shoulders/triceps; lighter load.'},
        {id:'machine-shoulder-press', title:'Machine Shoulder Press', sets:'3√ó12', category:'Push', blurb:'High-rep shoulder shaping.'},
        {id:'arnold-press', title:'Arnold Press (DB)', sets:'3√ó10', category:'Push', blurb:'Front/side delt emphasis.'}
      ],
      'd4-facepull': [
        {id:'face-pull', title:'Face Pulls', sets:'3√ó12‚Äì15', category:'Pull', blurb:'Rear delts/rotator cuff.'},
        {id:'reverse-pec-deck', title:'Reverse Pec Deck', sets:'3√ó12‚Äì15', category:'Pull', blurb:'Machine rear delt fly.'}
      ],
      'd4-biceps': [
        {id:'db-curl', title:'Biceps Curls', sets:'2√ó12', category:'Accessory', blurb:'DB curls; strict form.'},
        {id:'cable-curl', title:'Cable Curl (EZ/Bar)', sets:'2√ó12', category:'Accessory', blurb:'Constant tension.'},
        {id:'preacher', title:'Preacher Curl (Machine/Bench)', sets:'2√ó10‚Äì12', category:'Accessory', blurb:'Locked-in elbow; peak focus.'}
      ],
      'd4-triceps': [
        {id:'rope-pushdown', title:'Triceps Rope Pushdowns', sets:'2√ó12', category:'Accessory', blurb:'Elbows pinned; full extension.'},
        {id:'bar-pushdown', title:'Straight-Bar Pushdown', sets:'2√ó12', category:'Accessory', blurb:'Heavier loading.'},
        {id:'oh-cable-ext', title:'Overhead Cable Extension', sets:'2√ó12', category:'Accessory', blurb:'Long head stretch.'}
      ],
      // Day 5
      'd5-front': [
        {id:'front-squat', title:'Front Squat', sets:'3√ó8', category:'Legs', blurb:'Quads/core; upright torso.'},
        {id:'goblet-squat', title:'Goblet Squat', sets:'3√ó10', category:'Legs', blurb:'DB/kettlebell; posture drill.'},
        {id:'hack-squat', title:'Hack Squat (Machine)', sets:'3√ó10', category:'Legs', blurb:'Quad emphasis; guided path.'},
        {id:'leg-press', title:'Leg Press (Quad Bias)', sets:'3√ó12', category:'Legs', blurb:'Feet low/narrow for quads.'}
      ],
      'd5-hip': [
        {id:'barbell-hip-thrust', title:'Barbell Hip Thrust', sets:'3√ó8‚Äì10', category:'Legs', blurb:'Glute strength & shape.'},
        {id:'smith-hip-thrust', title:'Smith Machine Hip Thrust', sets:'3√ó10', category:'Legs', blurb:'Stable path; easy setup.'},
        {id:'glute-drive', title:'Glute Drive / Hip Thrust Machine', sets:'3√ó10', category:'Legs', blurb:'Machine-supported thrust.'}
      ],
      'd5-legcurl': [
        {id:'lying-leg-curl', title:'Leg Curl (Lying)', sets:'3√ó10‚Äì12', category:'Pull', blurb:'Hamstring isolation.'},
        {id:'seated-leg-curl', title:'Leg Curl (Seated)', sets:'3√ó10‚Äì12', category:'Pull', blurb:'Great lengthened tension.'},
        {id:'nordic-assisted', title:'Nordic Curl (Assisted)', sets:'3√ó6‚Äì8', category:'Pull', blurb:'High tension; control descent.'}
      ],
      'd5-bulg': [
        {id:'bulgarian', title:'Bulgarian Split Squat', sets:'2√ó12/leg', category:'Legs', blurb:'Single-leg quad/glute.'},
        {id:'step-up', title:'Step-Ups (DB)', sets:'2√ó10/leg', category:'Legs', blurb:'Knee drive; control descent.'},
        {id:'smith-split-squat', title:'Smith Split Squat', sets:'2√ó10/leg', category:'Legs', blurb:'Guided path; balance assist.'}
      ]
    };

    // Attach variant button & menu; apply saved choice
    document.querySelectorAll('.ex').forEach(ex=>{
      const cb = ex.querySelector('input[data-key]');
      if(!cb) return;
      const key = cb.dataset.key;

      // title/desc/meta references
      const contentBox = ex.querySelector('div:nth-of-type(2)');
      const titleEl = contentBox?.querySelector('strong');
      const descEl  = contentBox?.querySelector('small');
      const metaEl  = ex.querySelector('.meta');

      // Only for slots with variants
      const options = VARIANTS[key];
      if(!options){ return; }

      // Ensure a variant button exists (after the <strong>)
      let vb = contentBox.querySelector('.variant-btn');
      if(!vb){
        vb = document.createElement('button');
        vb.className = 'variant-btn';
        vb.type = 'button';
        vb.setAttribute('aria-label','Choose alternative exercise');
        vb.textContent = '‚ñº';
        titleEl?.insertAdjacentElement('afterend', vb);
      }

      // Apply current selection (default = first)
      const selId = savedVariant[key] || options[0].id;
      const cur = options.find(o=>o.id===selId) || options[0];
      applyVariant(cur);

      // Menu interaction
      vb.addEventListener('click', (e)=>{
        e.stopPropagation();
        closeAllVariantMenus();
        const menu = document.createElement('div');
        menu.className = 'variant-menu';
        const h = document.createElement('h4'); h.textContent = 'Choose alternative';
        menu.appendChild(h);

        options.forEach(o=>{
          const b = document.createElement('button');
          b.type='button'; b.className='variant-opt';
          b.innerHTML = `
            <div class="title">${o.title} <span class="sets">${o.sets}</span></div>
            <div class="cat">${o.category}</div>
          `;
          const sub = document.createElement('small'); sub.textContent = o.blurb;
          b.appendChild(sub);
          b.addEventListener('click', ()=>{
            savedVariant[key] = o.id; setLS(variantKey, savedVariant);
            applyVariant(o);
            flashToast('Exercise updated'); menu.remove();
          });
          menu.appendChild(b);
        });

        document.body.appendChild(menu);
        const r = vb.getBoundingClientRect();
        Object.assign(menu.style,{ left: (r.left+window.scrollX)+'px', top:(r.bottom+window.scrollY+6)+'px' });
        requestAnimationFrame(()=> menu.classList.add('open'));
      });

      function applyVariant(o){
        // Update title + sets tag (keep variant button after it)
        if(titleEl){
          titleEl.innerHTML = `${o.title} <span class="tag">${o.sets}</span>`;
          titleEl.insertAdjacentElement('afterend', vb);
        }
        if(descEl){ descEl.textContent = o.blurb; }
        if(metaEl){ metaEl.textContent = o.category; }
        ex.setAttribute('data-ex', o.title);
        ex.setAttribute('data-variant', o.id); // for timer preset scoping
      }
    });

    function closeAllVariantMenus(){ document.querySelectorAll('.variant-menu').forEach(m=>m.remove()); }
    document.addEventListener('click', closeAllVariantMenus);
    document.addEventListener('scroll', closeAllVariantMenus, true);

    // ========= REST TIMER (per-exercise, remembers presets; aware of variants) =========
    const timersHost = document.querySelector('.running-timers');
    const restKey = 'pocket:rest';
    const savedRest = getLS(restKey, {}); // { "<exKey>::<variantId>": seconds }
    const PRESETS = [30,60,90,120,180];

    function suggestedSeconds(exRow){
      const role = (exRow.querySelector('.meta')?.textContent || '').toLowerCase();
      if(role.includes('accessory')) return 60;
      if(role.includes('core')) return 60;
      if(role.includes('power')) return 90;
      if(role.includes('legs') || role.includes('push') || role.includes('pull')) return 120;
      return 90;
    }
    function fmt(s){ const m=Math.floor(s/60), r=s%60; return `${m}:${String(r).padStart(2,'0')}`; }

    function startTimer(label, seconds){
      const pill = document.createElement('div');
      pill.className = 'timer-pill';
      const name = document.createElement('span'); name.className='name'; name.textContent = label;
      const time = document.createElement('span'); time.className='time'; time.textContent = fmt(seconds);
      const cancel = document.createElement('button'); cancel.setAttribute('aria-label','Cancel timer'); cancel.textContent = '‚úï';
      pill.append(name, time, cancel); timersHost.appendChild(pill);

      let t = seconds;
      const iv = setInterval(()=>{
        t--; time.textContent = fmt(t);
        if(t<=0){
          clearInterval(iv); pill.remove();
          flashToast('Go!');
          if(navigator.vibrate){ try{ navigator.vibrate([150,80,150]); }catch(_){ } }
        }
      },1000);

      const cancelAll = ()=>{ clearInterval(iv); pill.remove(); flashToast('Timer canceled'); };
      cancel.addEventListener('click', (e)=>{ e.stopPropagation(); cancelAll(); });
      pill.addEventListener('click', (e)=>{ if(e.target!==cancel) cancelAll(); });
    }

    // add buttons under each checkbox (only once)
    document.querySelectorAll('.ex').forEach(ex=>{
      const cb = ex.querySelector('input[type="checkbox"][data-key]');
      if(!cb) return;
      const key = cb.dataset.key;
      const left = ex.querySelector('.left');
      if(!left) return;

      // Prevent duplicates if rerun
      if(left.querySelector('.timer-btn')) return;

      const tBtn = document.createElement('button');
      tBtn.type='button'; tBtn.className='timer-btn'; tBtn.setAttribute('aria-label','Start rest timer'); tBtn.textContent='‚è±';
      const pBtn = document.createElement('button');
      pBtn.type='button'; pBtn.className='preset-btn'; pBtn.setAttribute('aria-label','Timer presets'); pBtn.textContent='‚ãØ';
      left.appendChild(tBtn); left.appendChild(pBtn);

      const variantId = ()=> ex.dataset.variant || 'default';
      const restMapKey = ()=> `${key}::${variantId()}`;
      const label = ()=> (ex.getAttribute('data-ex') || ex.querySelector('strong')?.textContent || 'Exercise').trim().replace(/\s*\(.+?\)/,'');

      // Quick start
      tBtn.addEventListener('click', (e)=>{
        e.stopPropagation();
        const custom = savedRest[restMapKey()];
        const secs = Number(custom ?? suggestedSeconds(ex));
        startTimer(label().slice(0,36), secs);
      });

      // Presets menu
      pBtn.addEventListener('click', (e)=>{
        e.stopPropagation();
        document.querySelectorAll('.rt-menu').forEach(m=>m.remove());
        const menu = document.createElement('div');
        menu.className='rt-menu';
        const title=document.createElement('h4'); title.textContent='Rest presets'; menu.appendChild(title);
        const row=document.createElement('div'); row.className='rt-row'; menu.appendChild(row);

        PRESETS.forEach(s=>{
          const chip=document.createElement('button'); chip.type='button'; chip.className='rt-chip';
          if(savedRest[restMapKey()]==s) chip.classList.add('active');
          chip.textContent = s + 's';
          chip.addEventListener('click', ()=>{
            savedRest[restMapKey()] = s; setLS(restKey, savedRest);
            startTimer(label().slice(0,36), s); flashToast(`Preset set: ${s}s`);
            menu.remove();
          });
          row.appendChild(chip);
        });

        const revert=document.createElement('button'); revert.type='button'; revert.className='rt-chip'; revert.textContent='Revert to suggested';
        revert.addEventListener('click', ()=>{
          delete savedRest[restMapKey()]; setLS(restKey, savedRest);
          flashToast('Using suggested time'); menu.remove();
        });
        const row2=document.createElement('div'); row2.className='rt-row'; row2.appendChild(revert); menu.appendChild(row2);

        document.body.appendChild(menu);
        const r=pBtn.getBoundingClientRect();
        Object.assign(menu.style,{ left:(r.left+window.scrollX-10)+'px', top:(r.bottom+window.scrollY+6)+'px' });
        requestAnimationFrame(()=> menu.classList.add('open'));

        const close=()=> menu?.remove();
        setTimeout(()=>{ document.addEventListener('click', close, { once:true }); },0);
      });
    });

  })();
</script>
</body>
</html>
